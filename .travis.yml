language: python
os: linux
dist: xenial
branches:
  only:
  - master
env: 
jobs:
  include:
  - stage: Tests
    python: 3.6
    env:
    - TOXENV=py36
    install: &1
    - pip install tox numpy scipy scikit-learn matplotlib seaborn
    script: &2
    - tox
    - pip install git+https://github.com/chlorochrule/cknn
  - python: 3.7
    env:
    - TOXENV=py37
    install: *1
    script: *2
  - stage: Deploy
    python: 3.7
    env:
    - secure: "P0ONQXbQC/KNf1keO1IWV23mOkDpdd0SZZ1Uo6q4Zn8xgSniTwH0Xf0PHZtRC7iFRLkdJFLC9FS1HGxESWqwBU0YMqiN5q2LwaOQoFGCHwtlHeSXm1KjlSf9nCgaVhM3gyzA4JfTUyUcRfiTUznbpFQbJhhHUjLHhstb9H5FPfj++KpckeUTXNgpnL8pLJZLKx2UoKv/t82srkWCmAJq/a70XNNQWLGjf817D6OWzO1c9t+bpYzOAIaLgESHMPWiNQK4okTJOW06R+QmxS388Jf21qMWVfF2cTyiVNy+RfwzI1AyXen012usYFw55ZUroNPbdOSmV9APgTQPjWoYIpAATbwV9pnygKnnMBDohbC2l4dASZ6rxFdaAJ2iR0Kz6k7tcSKPS2vrUhp5iAuqW8j4Qa4HzXAErPv+bvXy4Y2i6DoQ/ytMdehBYYBUeDejdfcXrnCNwfE3WeLBzw4/ZWudoJ2WLrTkYusaiGhf7VYxV8e7YfdGus5ztk6/0Kt2vSCCaGCgQyirAg1xriYqcix3+UELg82lNprpqrwgBEnH0RBhBnhxJk6+MHcBJ51jji6G0EikD/rzXhamX6D93FByz+xnhBMOq7qBuUVq0V8AIjKZn2YgVMvJBYA0lVH+7We2h6aRPeW1y4Dvg+D2btMOpMpbYvE5yw7n26e5SmM="
    install:
    - pip install sphinx sphinx_rtd_theme
    script:
    - '[ "$TRAVIS_BRANCH" == master ] && [ "$TRAVIS_PULL_REQUEST" == "false" ] && source ./deploy.sh'
