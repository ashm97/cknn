language: python
os: linux
dist: xenial
branches:
  only:
  - master
env: 
jobs:
  include:
  - stage: Tests
    python: 3.6
    env:
    - TOXENV=py36
    install: &1
    - pip install tox numpy scipy scikit-learn matplotlib seaborn
    script: &2
    - tox
    - pip install git+https://github.com/chlorochrule/cknn
  - python: 3.7
    env:
    - TOXENV=py37
    install: *1
    script: *2
  - stage: Deploy
    python: 3.7
    env:
    - secure: BZ/ZF0Hzo7qo1jZLYrL6W9dXisGxpoQ+VWV7jeEYn/HcnEroJvS9koxU68uWsgchl/AGXINdu09KDLToe65SR92DQZY/umYcFgTLShaTwqFmimTbNkYZzLNTYFv0w2GqR/WIYWe395a7wkTOFn7Ztoo73x8iEi0copWHf+4o+4tBNZ2tnzq8xyRzgJMcm+wKbELLRnnxdURc2da5TTn25kMBkwzQroOsfi4JQMXGLZoM/itNgcpZwAJLLJ6R0kcl1yA5umQDVl/PRHbl/8KP6J10KXD+gUnokXuSOHNCq8AiDnmYSQY/r4AOr9gQicaa9+0UyCLueglHV/lz5B0ZWuLF7H0P8PpMeQIGLSx2+89rFO8N2eL6BLJLbtfW5q1ah+mQCH5nbicPyvPAk9VX8JfSZHCC+sD604XuIJWH6CU+2PhQBZMipoagadUHg3fERndjr/fsG3WjNDWBEBRKSqP0sVJJmru7P+VzfGrUs8X7qZfk6XjG8lC4tKHMqlh7UgV5115MWYDtoF9kxDtyifKX/OYzh3c410LX1KjUXmI1zGhgTjD9/YMHzmItoPKpNdYgz8BRF2LuxuzVxt3vGb1Q6/jU9fvQETprz8yWi3RjOdD7W58lK5ScxHi2T9NXgxoAlkv7rfzf/9q641bQde1Ipx7tU4Agf2nvmNCveAM=
    install:
    - pip install sphinx sphinx_rtd_theme
    script:
    - '[ "$TRAVIS_BRANCH" == master ] && [ "$TRAVIS_PULL_REQUEST" == "false" ] && bash ./deploy.sh'
